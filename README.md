# Code to Generate Pelli-Robson Contrast Sensitivity Charts
*Adapted from https://github.com/manu-mannattil/vachart, https://github.com/shaanbhambra/CAS_Snellen_VA_Chart AND https://github.com/brendanktao/ETDRS_CASandLatin*

This repository contains Python scripts and LaTeX templates for generating Pelli-Robson contrast sensitivity charts, in both Latin characters and Canadian Aboriginal Syllabics (CAS). These charts can be used for testing contrast sensitivity in a standardized manner and are adaptable for various testing scenarios.

## **Repository Structure**

```plaintext
├── AboriginalSerifBOLD.ttf           # Font file for CAS charts
├── arialb.ttf                        # Font file for Latin charts
├── PelliRobson_CAS.pdf               # Example PDF for CAS chart
├── PelliRobson_CAS_Template.tex      # LaTeX template for CAS charts
├── PelliRobson_CAS_Example.tex       # Example LaTeX file for CAS charts
├── PelliRobson_LATIN_Template.tex    # LaTeX template for Latin charts
├── PelliRobson_LATIN_Example.tex     # Example LaTeX file for Latin charts
├── README.md                         # Project documentation
├── pellirobson_cas.py                # Python script to generate CAS TeX content
├── pellirobson_latin.py              # Python script to generate Latin TeX content
```


---
## **Steps for CAS Charts**

1. **Run `PelliRobson_CAS.py`**:
   - This script generates the TeX output containing a random sequence of CAS letters and their associated contrast levels.
   - Save this output for use in the steps below.

2. **Edit `PelliRobson_CAS_Template.tex`**:
   - Open the LaTeX template and locate the `\begin{longtable}{ccc}` section.
   - Replace the table rows with the TeX output generated by `PelliRobson_CAS.py`.

3. **Compile the LaTeX File**:
   - Use Overleaf or a local LaTeX installation with the XeLaTeX compiler to generate the PDF chart.

4. **Custom Adjustments**:
   - To adjust spacing or contrast, edit the variables in `PelliRobson_CAS.py` and re-run the script.


## **Steps for Latin Charts**

1. **Run `PelliRobson_Latin.py`**:
   - This script generates the TeX output for the Latin version of the chart.
   - Save the output for insertion into the LaTeX file.

2. **Edit `PelliRobson_LATIN_Template.tex`**:
   - Open the LaTeX template and locate the `\begin{longtable}{ccc}` section.
   - Replace the rows with the output generated by `PelliRobson_Latin.py`.

3. **Compile the LaTeX File**:
   - Use Overleaf or a local LaTeX installation with the XeLaTeX compiler to generate the final PDF.
  
## **Chart Features**

The Pelli-Robson chart is designed to test **contrast sensitivity** by progressively reducing the contrast of letters across rows.

### **Latin Version**
- **Letters**: The standard chart uses **Latin characters** (e.g., A-Z).
- **Layout**: Letters are grouped in triplets, with contrast decreasing by 0.15 log units per triplet.
- **Contrast Levels**: Begins at **100% contrast** and reduces logarithmically.

### **CAS Version**
- **Letters**: Uses a random selection of **ᐱ, ᑎ, ᑭ, ᒧ, ᒋ, ᒥ, ᑯ, and ᔨ**, which are commonly used across Inuktitut, Cree, and Ojibwe.
- **Layout**: Follows the same triplet grouping and contrast progression as the Latin version.

### **Contrast Sensitivity Notation**
- **Log Contrast Sensitivity (logCS)**: The chart uses the log contrast sensitivity scale for precise measurement.
- **Contrast Values**: Represented as a percentage (e.g., 100%, 50%, etc.) and corresponding logCS values.

## **Testing Standards**

The **Pelli-Robson chart** follows these standardized practices:

1. **Contrast Sensitivity Levels**:
   - Contrast decreases logarithmically by **0.15 logCS** per triplet.

2. **Testing Distance**:
   - The standard testing distance is **1 meter**, but this can be adjusted in the Python and LaTeX files.

3. **Letter Layout**:
   - The chart includes 14 triplets (2 triplets per row for 7 rows) with spacing adjusted for optimal readability.

4. **Contrast Notation**:
   - Contrast is shown as a percentage alongside its corresponding log contrast sensitivity (logCS).

## **Custom Adjustments**

- **Change Optotypes**:
  Modify the `optotypes` variable in the Python script to include different letters or symbols.
- **Adjust Spacing**:
  Modify the LaTeX template to change spacing between triplets or rows.
- **Contrast Scaling**:
  Adjust the `initial_contrast` and `log_decrement` variables in the Python script for customized contrast levels.


## **Compiling the Charts**

We recommend using [Overleaf](https://overleaf.com) for ease of use. Be sure to:
1. Set the compiler to **XeLaTeX**.
2. Ensure the font files (`arialb.ttf`, `AboriginalSerifBOLD.ttf`) are uploaded in the same directory.

Alternatively, you can use a local LaTeX installation with the following command:
```bash
xelatex PelliRobson_CAS_Template.tex
```


---
## **Further Reading**

- **Pelli-Robson Chart**: Learn more about contrast sensitivity testing in the original publication:  
  Pelli, D. G., Robson, J. G., & Wilkins, A. J. (1988). "The design of a new letter chart for measuring contrast sensitivity." *Clinical Vision Sciences*.

- **Contrast Sensitivity in Practice**:  
  A. R. Elkington, H. J. Frank, M. J. Greaney, Clinical Optics, 3rd ed. (Blackwell Science, Oxford, 1999).


## **Disclaimer and License**
This repository is for **educational and research purposes only**. It is not intended as medical advice or a substitute for professional healthcare. Always consult a licensed optometrist or vision care provider for clinical use.

This project is licensed under the [MIT License](LICENSE).



